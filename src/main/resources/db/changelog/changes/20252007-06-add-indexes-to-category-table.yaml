databaseChangeLog:
  # =====================================================================
  # 6-QADAM: "category" JADVALIGA MAXSUS INDEKSLAR QO'SHISH
  # =====================================================================
  - changeSet:
      id: 20252007-06-add-indexes-to-category-table
      author: Eldor04
      dbms: "postgresql"
      comment: "Step 6: Adding a partial unique index on slug and a regular index on name"
      changes:
        - sql:
            sql: |
              CREATE UNIQUE INDEX idx_category_slug_unique_not_deleted
              ON category (slug)
              WHERE deleted = false;
        - createIndex:
            indexName: idx_category_name
            tableName: category
            columns:
              - column:
                  name: name
      rollback:
        - dropIndex:
            indexName: idx_category_slug_unique_not_deleted
            tableName: category
        - dropIndex:
            indexName: idx_category_name
            tableName: category